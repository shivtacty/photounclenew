import{r,j as e,C as L,m as R}from"./index-Db9z8UT4.js";import{b as g}from"./AuthAction-UP5s0lZh.js";import{C as V,a as W,b as v,c as T}from"./CTabList-BuYgKQmO.js";import{C as D,a as q,b as n}from"./DefaultLayout-CNucmguA.js";import{C as x,a as c}from"./CRow-DsbToJoR.js";import{C as m,a as d}from"./CCardBody-eQMHGlfn.js";import{C as f}from"./CCardText-5Uf89tVO.js";import{C as H}from"./CFormCheck-OzG9jCTe.js";import{C as k}from"./CFormInput-DYKALodE.js";import{a as b}from"./CContainer-DXdaP05w.js";import{C as Z,a as G,b as J}from"./CToastHeader-Cv782l4t.js";import{c as O}from"./cil-trash-CBbKHhHb.js";import{C as X,a as Q,b as U,c as Y,d as $}from"./CModalTitle-DycyKgnb.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlValidation-CfB9W1lU.js";import"./CFormLabel-CVh-CnVZ.js";import"./CFormControlWrapper-D1zQXXsx.js";const je=()=>{const[j,I]=r.useState([]),[y,F]=r.useState([]),[i,p]=r.useState([]),[u,C]=r.useState(!1),[w,_]=r.useState(!0),[S,B]=r.useState(!1),[N,h]=r.useState(!1),[ee,E]=r.useState(null);r.useEffect(()=>{(async()=>{_(!0);try{let o=await g.get("https://photouncle.com/gateway/web/genie/parent-photouncle/v2/SelectPictureAPI");o.status===200&&I(o.data)}catch(o){console.error("Error in fetchData:",o)}finally{_(!1)}})()},[u]),r.useEffect(()=>{(async()=>{try{let o=await g.get("https://photouncle.com/gateway/web/genie/parent-photouncle/v2/RetouchedPicsAPI");o.status===200&&(console.log(o.data),F(o.data))}catch(o){console.error("Error in fetchData:",o)}})()},[u,N]);const M=t=>{const o=[...i];if(o.some(s=>s.google_image_id===t.google_image_id)){const s=o.filter(l=>l.google_image_id!==t.google_image_id);p(s)}else o.push({...t,comment:""}),p(o)},A=(t,o)=>{const a=[...i];a[t].comment=o.target.value,p(a)},P=async()=>{let t=new FormData;const o=i.map(s=>({image_comments:s.comment,clientid:2899,google_image_id:s.google_image_id,google_image:s.google_image}));t.append("Photo",JSON.stringify(o));let a={method:"post",maxBodyLength:1/0,url:"https://photouncle.com/gateway/web/genie/parent-photouncle/v2/ImageInsertApi.php",data:t};try{const s=await g.request(a);C(!0),console.log(s.data),B(!0)}catch(s){console.log(s)}},z=localStorage.getItem("authToken"),K=async t=>{var a;E(t),h(!0);let o=new FormData;o.append("delete_image",t),o.append("clientid",z),console.log(u);try{const s={method:"post",url:"https://photouncle.com/gateway/web/genie/parent-photouncle/v2/ImageDeleteApi.php",data:o},l=await g.request(s);(a=l==null?void 0:l.data)!=null&&a.status&&(console.log(l),console.log("Image deleted from server:",l.data),C(!0))}catch(s){console.error("Error deleting image:",s),alert("Error deleting image")}};return e.jsx("div",{className:"p-4",children:e.jsxs(V,{activeItemKey:"total",style:{border:"2px solid #ddd",borderRadius:"10px"},children:[e.jsx("div",{className:"fixed-tab-header",children:e.jsxs(W,{variant:"tabs",children:[e.jsxs(v,{itemKey:"total",children:[e.jsx("span",{children:"Total Items"}),e.jsx(D,{color:"info",className:"ms-2",children:j.length})]}),e.jsxs(v,{itemKey:"selected",children:[e.jsx("span",{children:"Selected Items"}),e.jsx(D,{color:"success",className:"ms-2",children:w?"":y.length})]})]})}),e.jsxs(q,{children:[e.jsxs(T,{className:"p-3",itemKey:"total",children:[e.jsx("div",{className:"container mt-1",children:e.jsxs(x,{className:"text-center",children:[e.jsx(c,{sm:"4",className:"mb-4",children:e.jsx(m,{className:"shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx(n,{src:"https://photouncle.com/gateway/web/genie/parent-mybaby247/eye-24-512.png",alt:"View Zoom",width:"70",height:"70",className:"mb-3"}),e.jsx(f,{component:"p",style:{fontFamily:"Calibri",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"1. Click image to View / Zoom"})]})})}),e.jsx(c,{sm:"4",className:"mb-4",children:e.jsx(m,{className:"shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx(n,{src:"https://photouncle.com/gateway/web/genie/parent-mybaby247/Very-Basic-Checked-checkbox-icon.png",alt:"Select Images",width:"70",height:"70",className:"mb-3"}),e.jsx(f,{component:"p",style:{fontFamily:"Calibri",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"2. Check/Select images for editing"})]})})}),e.jsx(c,{sm:"4",className:"mb-4",children:e.jsx(m,{className:"shadow-sm border-0",children:e.jsxs(d,{children:[e.jsx(n,{src:"https://photouncle.com/gateway/web/genie/parent-mybaby247/submitbutton.png",alt:"Submit",width:"70",height:"70",className:"mb-3"}),e.jsx(f,{component:"p",style:{fontFamily:"Calibri",fontSize:"14px",fontWeight:"bold",color:"#333"},children:"3. Click the Submit button"})]})})})]})}),w?e.jsxs("div",{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:[e.jsx(L,{color:"primary"}),e.jsx("span",{className:"ms-2",children:"Loading images..."})]}):e.jsx(x,{children:j.map((t,o)=>{var a;return e.jsx(c,{sm:"6",md:"4",lg:"3",className:"mb-4",children:e.jsxs(m,{className:"shadow-sm border-0 position-relative",style:{overflow:"hidden",transition:"transform 0.3s, box-shadow 0.3s",cursor:"pointer"},onMouseEnter:s=>{s.currentTarget.style.transform="scale(1.05)",s.currentTarget.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.2)"},onMouseLeave:s=>{s.currentTarget.style.transform="scale(1)",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{className:"position-relative",children:[e.jsx("a",{href:t==null?void 0:t.image_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(n,{className:"img-fluid rounded",src:t==null?void 0:t.image_url,style:{width:"100%",objectFit:"cover"}})}),e.jsx(H,{type:"checkbox",checked:i.some(s=>s.google_image_id===t.google_image_id),onChange:()=>M(t),style:{position:"absolute",top:"10px",right:"10px",transform:"scale(1.2)",cursor:"pointer"}})]}),i.some(s=>s.google_image_id===t.google_image_id)&&e.jsx(d,{children:e.jsx(k,{type:"text",value:((a=i.find(s=>s.google_image_id===t.google_image_id))==null?void 0:a.comment)||"",onChange:s=>A(o,s),placeholder:"Add a comment"})})]})},o)})}),e.jsx("div",{className:"d-flex justify-content-center mt-4",style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,width:"100%",textAlign:"center"},children:e.jsx(b,{color:"primary",onClick:P,children:"Submit Selected Items"})})]}),S&&e.jsxs(Z,{autohide:!0,visible:S,color:"success",className:"position-fixed top-0 end-0 m-3",children:[e.jsx(G,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:"Success"})}),e.jsx(J,{children:"The selected items have been successfully submitted!"})]}),e.jsx(T,{className:"p-3",itemKey:"selected",children:e.jsxs(x,{children:[y.map((t,o)=>(console.log(t),e.jsx(c,{sm:"6",md:"4",lg:"3",className:"mb-4",children:e.jsxs(m,{className:"shadow-sm border-0 position-relative",children:[e.jsx(R,{icon:O,className:"position-absolute top-0 end-0 m-2",style:{color:"red",fontSize:"1.8rem",cursor:"pointer",boxShadow:"rgb(1 1 18 / 94%) 1px -1px 5px 0px",width:"35px",height:"35px",padding:"7px",borderRadius:"5px",background:"white"},onClick:()=>K(t==null?void 0:t.google_image_id)}),e.jsx("a",{href:t.image_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(n,{className:"img-fluid rounded",src:t.image_url,style:{width:"100%",objectFit:"cover"}})}),e.jsx(d,{children:e.jsx(k,{className:"mt-2",type:"text",value:t.comments,placeholder:"Add a comment"})})]})},t==null?void 0:t.google_image_id))),e.jsxs(X,{visible:N,onClose:()=>h(!1),alignment:"center",children:[e.jsx(Q,{closeButton:!0,children:e.jsx(U,{children:"Confirm Deletion"})}),e.jsx(Y,{children:"Are you sure you want to delete this image?"}),e.jsxs($,{children:[e.jsx(b,{color:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(b,{color:"danger",onClick:()=>h(!1),children:"Delete"})]})]})]})})]})]})})};export{je as default};
